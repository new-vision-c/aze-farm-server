components:
  parameters:
    farmId:
      description: ID de la ferme
      in: path
      name: id
      required: true
      schema:
        type: string
    limit:
      description: Nombre maximum de résultats
      in: query
      name: limit
      schema:
        default: 10
        maximum: 100
        minimum: 1
        type: integer
    page:
      description: Numéro de page
      in: query
      name: page
      schema:
        default: 1
        minimum: 1
        type: integer
    productId:
      description: ID du produit
      in: path
      name: id
      required: true
      schema:
        type: string
    userId:
      description: ID de l'utilisateur
      in: path
      name: userId
      required: true
      schema:
        type: string
  schemas:
    AuthResponse:
      properties:
        data:
          properties:
            token:
              type: string
            user:
              $ref: '#/components/schemas/User'
          type: object
        message:
          type: string
        success:
          type: boolean
      type: object
    ErrorResponse:
      properties:
        error:
          type: string
        message:
          type: string
        success:
          example: false
          type: boolean
      type: object
    Farm:
      properties:
        address:
          type: string
        categories:
          items:
            type: string
          type: array
        description:
          type: string
        geoLocation:
          properties:
            latitude:
              type: number
            longitude:
              type: number
          type: object
        id:
          type: string
        images:
          items:
            type: string
          type: array
        name:
          type: string
        products:
          items:
            $ref: '#/components/schemas/FarmProduct'
          type: array
        rating:
          properties:
            average:
              type: number
            count:
              type: integer
          type: object
      type: object
    FarmProduct:
      properties:
        category:
          type: string
        createdAt:
          format: date-time
          type: string
        id:
          type: string
        image:
          type: string
        name:
          type: string
        price:
          type: number
        stock:
          type: integer
        unit:
          type: string
      type: object
    Product:
      properties:
        category:
          type: string
        description:
          type: string
        id:
          type: string
        images:
          items:
            type: string
          type: array
        location:
          properties:
            address:
              type: string
            lat:
              type: number
            lng:
              type: number
          type: object
        name:
          type: string
        price:
          type: number
      type: object
    User:
      properties:
        createdAt:
          format: date-time
          type: string
        email:
          format: email
          type: string
        fullname:
          type: string
        id:
          type: string
        role:
          enum:
          - user
          - admin
          - moderator
          type: string
        updatedAt:
          format: date-time
          type: string
      type: object
  securitySchemes:
    bearerAuth:
      bearerFormat: JWT
      description: JWT obtained after authentication
      scheme: bearer
      type: http
info:
  contact:
    email: support@azefarm.com
    name: Équipe Support AZE FARM
    url: https://azefarm.com/support
  description: API complète pour la gestion des produits agricoles, fermes et commandes avec recherche géolocalisée
  title: AZE FARM API Documentation
  version: 1.0.0
openapi: 3.0.3
paths:
  /_csp-reports:
    post:
      description: Endpoint post pour /_csp-reports
      requestBody:
        content:
          application/json:
            schema:
              properties:
                data:
                  type: object
              type: object
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      summary: Post /_csp-reports
      tags:
      - System
  /auth/change-password:
    post:
      description: Endpoint post pour /auth/change-password
      requestBody:
        content:
          application/json:
            schema:
              properties:
                data:
                  type: object
              type: object
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      security:
      - bearerAuth: []
      summary: Post /auth/change-password
      tags:
      - Authentication
  /auth/forgot-password:
    post:
      description: Endpoint post pour /auth/forgot-password
      requestBody:
        content:
          application/json:
            schema:
              properties:
                data:
                  type: object
              type: object
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      summary: Post /auth/forgot-password
      tags:
      - Authentication
  /auth/login:
    post:
      description: Endpoint post pour /auth/login
      requestBody:
        content:
          application/json:
            schema:
              properties:
                data:
                  type: object
              type: object
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      summary: Post /auth/login
      tags:
      - Authentication
  /auth/logout:
    post:
      description: Endpoint post pour /auth/logout
      requestBody:
        content:
          application/json:
            schema:
              properties:
                data:
                  type: object
              type: object
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      security:
      - bearerAuth: []
      summary: Post /auth/logout
      tags:
      - Authentication
  /auth/me/profile:
    get:
      description: Endpoint get pour /auth/me/profile
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      security:
      - bearerAuth: []
      summary: Get /auth/me/profile
      tags:
      - Authentication
  /auth/register:
    post:
      description: Endpoint post pour /auth/register
      requestBody:
        content:
          application/json:
            schema:
              properties:
                data:
                  type: object
              type: object
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      summary: Post /auth/register
      tags:
      - Authentication
  /auth/resend-otp:
    post:
      description: Endpoint post pour /auth/resend-otp
      requestBody:
        content:
          application/json:
            schema:
              properties:
                data:
                  type: object
              type: object
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      security:
      - bearerAuth: []
      summary: Post /auth/resend-otp
      tags:
      - Authentication
  /auth/reset-password/{resetToken}:
    post:
      description: Endpoint post pour /auth/reset-password/{resetToken}
      requestBody:
        content:
          application/json:
            schema:
              properties:
                data:
                  type: object
              type: object
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      summary: Post /auth/reset-password/{resetToken}
      tags:
      - Authentication
  /auth/verify-otp:
    post:
      description: Endpoint post pour /auth/verify-otp
      requestBody:
        content:
          application/json:
            schema:
              properties:
                data:
                  type: object
              type: object
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      summary: Post /auth/verify-otp
      tags:
      - Authentication
  /csrf-token:
    get:
      description: Endpoint get pour /csrf-token
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      summary: Get /csrf-token
      tags:
      - System
  /farms/{id}:
    get:
      description: Endpoint get pour /farms/{id}
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      summary: Get /farms/{id}
      tags:
      - Farms
  /health:
    get:
      description: Endpoint get pour /health
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      summary: Get /health
      tags:
      - System
  /oauth/token:
    post:
      description: Endpoint post pour /oauth/token
      requestBody:
        content:
          application/json:
            schema:
              properties:
                data:
                  type: object
              type: object
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      security:
      - bearerAuth: []
      summary: Post /oauth/token
      tags:
      - OAuth
  /oauth/{provider}:
    get:
      description: Endpoint get pour /oauth/{provider}
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      security:
      - bearerAuth: []
      summary: Get /oauth/{provider}
      tags:
      - OAuth
  /oauth/{provider}/callback:
    get:
      description: Endpoint get pour /oauth/{provider}/callback
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      security:
      - bearerAuth: []
      summary: Get /oauth/{provider}/callback
      tags:
      - OAuth
  /products/categories:
    get:
      description: Endpoint get pour /products/categories
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      summary: Get /products/categories
      tags:
      - Products
  /products/search:
    get:
      description: Endpoint get pour /products/search
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      summary: Get /products/search
      tags:
      - Products
  /products/suggestions:
    get:
      description: Endpoint get pour /products/suggestions
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      summary: Get /products/suggestions
      tags:
      - Products
  /products/{id}:
    get:
      description: Endpoint get pour /products/{id}
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      summary: Get /products/{id}
      tags:
      - Products
  /users:
    get:
      description: Endpoint get pour /users
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      security:
      - bearerAuth: []
      summary: Get /users
      tags:
      - Users
  /users/export:
    get:
      description: Endpoint get pour /users/export
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      security:
      - bearerAuth: []
      summary: Get /users/export
      tags:
      - Users
  /users/profile:
    put:
      description: Endpoint put pour /users/profile
      requestBody:
        content:
          application/json:
            schema:
              properties:
                data:
                  type: object
              type: object
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      security:
      - bearerAuth: []
      summary: Put /users/profile
      tags:
      - Users
  /users/search:
    get:
      description: Endpoint get pour /users/search
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      security:
      - bearerAuth: []
      summary: Get /users/search
      tags:
      - Users
  /users/{userId}:
    get:
      description: Endpoint get pour /users/{userId}
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      security:
      - bearerAuth: []
      summary: Get /users/{userId}
      tags:
      - Users
  /users/{userId}/restore:
    post:
      description: Endpoint post pour /users/{userId}/restore
      requestBody:
        content:
          application/json:
            schema:
              properties:
                data:
                  type: object
              type: object
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      security:
      - bearerAuth: []
      summary: Post /users/{userId}/restore
      tags:
      - Users
  /users/{userId}/role:
    put:
      description: Endpoint put pour /users/{userId}/role
      requestBody:
        content:
          application/json:
            schema:
              properties:
                data:
                  type: object
              type: object
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                  success:
                    type: boolean
                type: object
          description: Succès
        '400':
          description: Requête invalide
        '500':
          description: Erreur serveur
      security:
      - bearerAuth: []
      summary: Put /users/{userId}/role
      tags:
      - Users
servers:
- description: Environnement de développement local
  url: http://localhost:3000
- description: Environnement de staging
  url: https://api.staging.azefarm.com
- description: Production
  url: https://api.azefarm.com
tags:
- description: Product search and management with geolocation
  name: Products
- description: Farm management and product listings
  name: Farms
- description: User authentication and account management
  name: Authentication
- description: User profile management
  name: Users
- description: Third-party authentication (Google, Apple, etc.)
  name: OAuth
- description: System endpoints
  name: System
